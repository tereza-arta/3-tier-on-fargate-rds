resource "aws_db_parameter_group" "this" {
  count = var.param_group_cnt
  name = var.param_group_name
  description = var.param_group_desc
  family = var.param_group_family

  parameter {
    name = var.param_1_name
    value = var.param_1_value
  }

  tags = {
    Name = var.param_group_tag
  }
}

data "aws_subnets" "pub" {
  filter {
  name = "vpc-id"
  values = [var.vpc]
  }
}

resource "aws_db_subnet_group" "this" {
  #for_each = data.aws_subnet_ids.pub.ids
  name = var.sub_group_name
  description = var.sub_group_desc
  subnet_ids = [for i in data.aws_subnets.pub : i.id]

  tags = {
    Name = var.sub_group_tag
  }
}
